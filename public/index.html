<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Govwiki</title>
  <style type="text/css">

      header {margin-top:1em; margin-bottom:1em;} /* font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; */
      #chart-container {height: 38em; width:100%; border:1px solid #000; margin-top:2em; margin-bottom:2em;}

  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>
<body>
<header>
  <h1>Govwiki</h1>
  <div id="menu">
    <select id="state-selector">
      <option value="AK">Alaska</option>
      <option value="AL" selected="true">Alabama</option>
      <option value="CA">California</option>
      <option value="CT">Connecticut</option>
    </select>

    <select id="gov-type-selector">
      <option value="General Purpose">General Purpose</option>
      <option value="School District">School District</option>
      <option value="Dependent School System">Dependent School System</option>
      <option value="Water Supply">Water Supply</option>
      <option value="Sewerage">Sewerage</option>
      <option value="Air Transportation(Airports)">Air Transportation (Airports)</option>
      <option value="Other and Unallocable">Other and Unallocable</option>
      <option value="Housing & Community Dev.">Housing &amp; Community Dev.</option>
      <option value="Soil & Water Conservation">Soil &amp; Water Conservation</option>
      <option value="Solid Waste Management">Solid Waste Management</option>
      <option value="Industrial Development">Industrial Development</option>
      <option value="Other Health">Other Health</option>
      <option value="Other Multi-function Districts">Other Multi-function Districts</option>
      <option value="Hospitals">Hospitals</option>
      <option value="Sewerage and Water Supply">Sewerage and Water Supply</option>
      <option value="Gas Supply">Gas Supply</option>
      <option value="Fire Protection and Water Supply">Fire Protection and Water Supply</option>
      <option value="Welfare Institutions">Welfare Institutions</option>
      <option value="Parks & Recreation">Parks &amp; Recreation</option>
      <option value="Electric Power">Electric Power</option>
      <option value="Fire Protection">Fire Protection</option>
      <option value="Misc. Commercial Activities">Misc. Commercial Activities</option>
      <option value="Sea and Inland Port Facilities">Sea and Inland Port Facilities</option>
      <option value="Correctional Institutions">Correctional Institutions</option>
      <option value="Public Mass Transit Systems">Public Mass Transit Systems</option>
      <option value="Other Natural Resources">Other Natural Resources</option>
      <option value="Irrigation">Irrigation</option>
      <option value="Flood Control">Flood Control</option>
      <option value="Natural Resources and Water Supply">Natural Resources and Water Supply</option>
      <option value="Highways - Nontoll">Highways - Nontoll</option>
      <option value="Drainage">Drainage</option>
      <option value="Libraries">Libraries</option>
      <option value="Parking Facilities">Parking Facilities</option>
      <option value="Education">Education</option>
      <option value="Mortgage Credit">Mortgage Credit</option>
      <option value="Cemeteries">Cemeteries</option>
      <option value="Reclamation">Reclamation</option>
      <option value="Police Protection">Police Protection</option>
      <option value="Toll Highways">Toll Highways</option>
      <option value="Other Public Welfare">Other Public Welfare</option>
      <option value="Other Corrections">Other Corrections</option>
    </select>

  </div>
</header>
<div id="list-container"></div>
<footer>
  <p><a href="https://github.com/grantbot/govwiki-client">source</a></p>
</footer>
<script type="text/javascript">

    var state_selector = document.getElementById("state-selector")
    var selected_state = state_selector.value
    state_selector.addEventListener("change", selectState, false)

    var gov_type_selector = document.getElementById("gov-type-selector")
    var selected_gov_type = gov_type_selector.value
    gov_type_selector.addEventListener("change", selectGovType, false)

    requestChart()

    function selectState(){
        selected_state = this.value
        requestChart()
    }

    function selectGovType(){
        selected_gov_type = this.value
        requestChart()
    }

    function requestChart(){
        var chart_request = {
            state: selected_state,
            gov_type: selected_gov_type
        }
        console.log(chart_request)
        // TODO: make a call to the server
        $.ajax({
          url: "/",
          type: 'POST',
          data: chart_request, 
          success: function (data) {
            console.log('DATA', data);
          }
        })
    }



</script>
</body>
</html>
